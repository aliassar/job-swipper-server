# ===========================================
# DATABASE CONFIGURATION (REQUIRED)
# ===========================================
# PostgreSQL connection string (supports Neon, AWS RDS, or any PostgreSQL instance)
# Format: postgresql://username:password@host:port/database
# REQUIRED: The server will not start without this variable
DATABASE_URL=postgresql://user:pass@host:5432/jobswiper

# ===========================================
# SECURITY CONFIGURATION (REQUIRED)
# ===========================================
# CORS - Comma-separated list of allowed origins for cross-origin requests
# REQUIRED: Add your frontend URL here. Multiple origins can be separated by commas.
# Development: http://localhost:3000
# Production: https://app.jobswiper.com,https://staging.jobswiper.com
# IMPORTANT: Your frontend must be in this list or requests will be blocked by CORS
ALLOWED_ORIGINS=http://localhost:3000

# Admin API Key - Secret key for admin route access (generate with: openssl rand -base64 32)
# OPTIONAL: Only required if you want to use admin endpoints
# IMPORTANT: Keep this secret and never commit it to version control
ADMIN_API_KEY=

# Frontend URL - Base URL of the frontend application (used for OAuth redirects)
# REQUIRED for OAuth: This is where users will be redirected after OAuth authentication
FRONTEND_URL=http://localhost:3000

# Rate Limiting - Maximum number of requests per window
# OPTIONAL: Defaults to 100 if not specified
RATE_LIMIT_MAX=100

# Rate Limiting - Time window in milliseconds (default: 60000 = 1 minute)
# OPTIONAL: Defaults to 60000 (1 minute) if not specified
RATE_LIMIT_WINDOW=60000

# ===========================================
# OAUTH AUTHENTICATION (Server-Side)
# ===========================================
# IMPORTANT: OAuth authentication is handled by THIS SERVER, not the frontend.
# The server provides OAuth endpoints (Google, GitHub) that the frontend should redirect to.
# The frontend uses NextAuth only to store the JWT token returned by this server.
# 
# OAuth Flow:
# 1. Frontend redirects user to: GET /api/auth/google or GET /api/auth/github
# 2. Server handles OAuth flow with provider
# 3. Server returns JWT token to frontend via callback URL
# 4. Frontend stores JWT token and uses it for subsequent requests
#
# Base URL for this API server (used for OAuth callbacks from providers)
# REQUIRED for OAuth: Set this to your API server's public URL
# Development: http://localhost:8787 or your dev server URL
# Production: https://api.jobswiper.app
NEXTAUTH_URL=https://api.jobswiper.app

# Secret key for NextAuth session encryption (generate with: openssl rand -base64 32)
# OPTIONAL: Legacy field, may not be used depending on OAuth implementation
NEXTAUTH_SECRET=

# GitHub OAuth Application credentials
# OPTIONAL: Only required if you want to enable GitHub OAuth login
# Create at: https://github.com/settings/developers
# Callback URL: ${NEXTAUTH_URL}/api/auth/github/callback
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# Google OAuth Application credentials
# OPTIONAL: Only required if you want to enable Google OAuth login
# Create at: https://console.cloud.google.com/apis/credentials
# Callback URL: ${NEXTAUTH_URL}/api/auth/google/callback
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Yahoo OAuth Application credentials
# OPTIONAL: Only required if you want to enable Yahoo OAuth login
# Create at: https://developer.yahoo.com/apps/
# Callback URL: ${API_URL}/api/auth/yahoo/callback
YAHOO_CLIENT_ID=
YAHOO_CLIENT_SECRET=

# Microsoft OAuth Application credentials
# OPTIONAL: Only required if you want to enable Microsoft/Outlook OAuth login
# Create at: https://portal.azure.com/
# Callback URL: ${API_URL}/api/auth/microsoft/callback
MICROSOFT_CLIENT_ID=
MICROSOFT_CLIENT_SECRET=

# ===========================================
# JWT AUTHENTICATION (REQUIRED)
# ===========================================
# Secret key for JWT token signing (generate with: openssl rand -base64 32)
# REQUIRED: The server will not start without this variable
# IMPORTANT: Keep this secret and never commit it to version control
# Generate with: openssl rand -base64 32
JWT_SECRET=

# JWT token expiration time (e.g., 7d, 30d, 1h)
# OPTIONAL: Defaults to 7d if not specified
JWT_EXPIRES_IN=7d

# ===========================================
# S3-COMPATIBLE FILE STORAGE (REQUIRED)
# ===========================================
# REQUIRED: S3 bucket name for storing resumes, cover letters, and generated documents
S3_BUCKET=

# REQUIRED: S3 region (e.g., us-east-1, auto for Cloudflare R2)
S3_REGION=

# REQUIRED: S3 access key ID
S3_ACCESS_KEY=

# REQUIRED: S3 secret access key
S3_SECRET_KEY=

# REQUIRED: S3 endpoint URL (for Cloudflare R2, AWS S3, or other S3-compatible services)
# Examples:
#   - Cloudflare R2: https://<account-id>.r2.cloudflarestorage.com
#   - AWS S3: https://s3.<region>.amazonaws.com
S3_ENDPOINT=

# ===========================================
# MICROSERVICES INTEGRATION (OPTIONAL)
# ===========================================
# All microservice configurations are OPTIONAL.
# The server will start without them, but related features will be disabled.

# Job Scraper Service - scrapes jobs from various sources
# OPTIONAL: Only needed for automated job scraping via /api/sync endpoint
SCRAPER_SERVICE_URL=
SCRAPER_SERVICE_KEY=

# Resume AI Service - generates tailored resumes using AI
# OPTIONAL: Only needed for AI resume generation feature
RESUME_AI_SERVICE_URL=
RESUME_AI_SERVICE_KEY=

# Cover Letter AI Service - generates personalized cover letters using AI
# OPTIONAL: Only needed for AI cover letter generation feature
COVER_LETTER_AI_SERVICE_URL=
COVER_LETTER_AI_SERVICE_KEY=

# Email Sync Service (Legacy) - monitors emails for application updates
# OPTIONAL: Legacy service, consider using Stage Updater instead
EMAIL_SYNC_SERVICE_URL=
EMAIL_SYNC_SERVICE_KEY=

# AI Filtering Service - filters jobs using AI-based criteria
# OPTIONAL: Only needed for AI-based job filtering
AI_FILTERING_SERVICE_URL=
AI_FILTERING_SERVICE_KEY=

# Application Sender Service - automatically submits job applications
# OPTIONAL: Only needed for automated application submission
APPLICATION_SENDER_SERVICE_URL=

# Job Filter Service - filters and categorizes scraped jobs
# OPTIONAL: Only needed for job filtering and categorization
JOB_FILTER_SERVICE_URL=

# Stage Updater Service - monitors emails and updates application stages
# OPTIONAL: Only needed for automatic application status updates from emails
# Note: STAGE_UPDATER_API_KEY is used for the /api/credentials/sync endpoint
#       STAGE_UPDATER_SERVICE_KEY is used for other Stage Updater endpoints
STAGE_UPDATER_SERVICE_URL=
STAGE_UPDATER_SERVICE_KEY=
STAGE_UPDATER_API_KEY=

# ===========================================
# EMAIL OAUTH CREDENTIALS (OPTIONAL)
# ===========================================
# These are for connecting user email accounts (Gmail, Outlook, Yahoo) to monitor job application emails.
# Different from Google/GitHub OAuth for authentication above.

# Gmail OAuth 2.0 credentials (for user email connections)
# OPTIONAL: Only needed if users want to connect their Gmail for email monitoring
# Create at: https://console.cloud.google.com/apis/credentials
GMAIL_CLIENT_ID=
GMAIL_CLIENT_SECRET=

# Outlook OAuth 2.0 credentials (for user email connections)
# OPTIONAL: Only needed if users want to connect their Outlook for email monitoring
# Create at: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps
OUTLOOK_CLIENT_ID=
OUTLOOK_CLIENT_SECRET=

# Yahoo OAuth 2.0 credentials (for user email connections)
# OPTIONAL: Only needed if users want to connect their Yahoo for email monitoring
# Create at: https://developer.yahoo.com/apps/
YAHOO_CLIENT_ID=
YAHOO_CLIENT_SECRET=

# ===========================================
# ENCRYPTION (REQUIRED for email connections)
# ===========================================
# Encryption key for sensitive data (email passwords, credentials)
# REQUIRED if using email connections: Needed to encrypt IMAP passwords
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# IMPORTANT: Changing this will invalidate all encrypted data
ENCRYPTION_KEY=

# ===========================================
# SMTP CONFIGURATION (OPTIONAL)
# ===========================================
# SMTP server for sending verification emails, password resets, etc.
# OPTIONAL: Only needed for email/password registration and password reset features
# If not configured, email verification and password reset will not work
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=user@example.com
SMTP_PASS=smtp-password

# Email address to send emails from
# OPTIONAL: Defaults to noreply@jobswiper.app if not specified
FROM_EMAIL=noreply@jobswiper.app

# ===========================================
# WEBHOOKS (OPTIONAL)
# ===========================================
# Secret key for verifying webhook requests from microservices
# OPTIONAL: Only needed if you're using microservices that send webhooks
# Generate with: openssl rand -base64 32
WEBHOOK_SECRET=

# ===========================================
# CRON JOBS (OPTIONAL)
# ===========================================
# Secret key for protecting cron endpoints (job sync)
# OPTIONAL: Only needed if you want to secure the /api/sync endpoint
# Generate with: openssl rand -base64 32
CRON_SECRET=

# ===========================================
# APPLICATION CONFIGURATION (OPTIONAL)
# ===========================================
# Server port for local development (default: 5000)
# OPTIONAL: Defaults to 5000 if not specified
# This matches the frontend's default NEXT_PUBLIC_API_URL (http://localhost:5000)
PORT=5000

# Logging level (debug, info, warn, error)
# OPTIONAL: Defaults to 'info' if not specified
LOG_LEVEL=info

# Node environment (development, production, test)
# OPTIONAL: Defaults to 'development' if not specified
NODE_ENV=development
